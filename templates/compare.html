{% extends 'base.html' %}

{% block title %}
Comparison of tests
{% endblock title %}

{% block content %}

	<div style="display: grid; grid-template-columns: repeat(12, 1fr); padding:0; margin:0;">
		<h2 class="btn btn-link" onclick="showAllRuns(this)" style="grid-column: 5/8; justify-self: stretch; align-self: center; font-size: 40px; font-weight: bold;">
			{{ context.testname }}
		</h2>
	</div>
</style>

<div class="all-tables">
	<button class="btn btn-outline-primary font-weight-bold float-right mr-5" onclick="toggleCheckbox()"><input id="checkbox-common" type="checkbox" name="common" value="hide-common"> Hide Common Properties</button>

	<!-- ###############RESULTS############### -->
    <div>
    	<h2>Results</h2>
    	<table class="table table-hover" id="results-table" style = "clear:left;">
    		<thead class="thead-dark">
	    		<tr>
	    			{% for index_name in context.index_columns %}
	    			<th></th>
	    			{% endfor %}
	    			{% for originID in context.originID_list %}
	    				<th class="test-numbers-row">Test_{{ originID }}</th>
	    			{% endfor %}
	    		</tr>
	    	</thead>

    		<tr>
    			{% for column_name in context.results %}
    				<th>{{ column_name }}</th>
    			{% endfor %}
    		</tr>

    		<!-- For all rows -->
    		{% for i in range(context.results | no_of_rows ) %}
    			{% set i = loop.index0 %}
    			<tr>
    				{% for key in context.results %}
    					<td>{{ context.results[key][i] }}</td>
    				{% endfor %}
    			</tr>
    		{% endfor %}
    	</table>
	</div>


	<!-- A Loop for displaying ALL Comparison Tables -->
	<div>
		{% for i in range(context.parameter_lists | length) %}
		{% set tablename = table_name(context.parameter_lists.keys(), i) %}
		<h2>{{ tablename }}</h2>
		{% set tablename = tablename|lower %}

		<table class="comparison-table table table-hover">
			<thead class="thead-dark">
				<tr>
					<th></th>
					{% for t_no in context.originID_list %}
						<th style="font-weight: bold">Test_{{ t_no }}</th>
					{% endfor %}
				</tr>
			</thead>

			{% for param in context.parameter_lists[tablename~"_param_list"] %}
			<tr>
				<td class="param" style="font-weight: bold;"> {{ param }}</td>

				{% for dict in context.compare_lists[tablename~"_list"] %}
	                <td>{{ dict[ param ] }}</td>    
	            {% endfor %}
			</tr>
			{% endfor %}
		</table>
		{% endfor %}
	</div>

</div>

<script>
	$( document ).ready(function() {
    	$("#checkbox-common").prop("checked", false);
	
	});

	function toggleCheckbox(){
		state = $('#checkbox-common').prop('checked');
		$('#checkbox-common').prop('checked', !state);

		//hide the common properties
		hideCommon();
	}
</script>

{% endblock content %}