{% extends 'base.html' %}

{% block title %}
Test Details
{% endblock title %}


{% block content %}

	<script>
		$( document ).ready(function() {
			console.log("LOADING INTERESTING TABLES")
			$("#resultsTable").DataTable({
				"lengthMenu": [[10, 25, 50, -1], [10, 25, 50, "All"]],
			});
	});
	</script>	

	<h2 style="text-align: center; font-weight: bold;">
		{{ context.testname }}
	</h2>

	<div class='inline-block-child'>
		<h2 style="text-align: center; font-weight: bold;">
			System Details
		</h2>
		<table id="systemDetailsTable">
			<tr>
				{% for column in context.system_details %}
					<th>{{ column }}</th>
				{% endfor %}
			</tr>

			<tr>
				{% for key in context.system_details %}
					{% if loop.index0 <= 3 %}
						{% if loop.index0 == 2 %}
							<td> <a href="/environment-details/{{ context.system_details[key][0] }}">{{ context.system_details[key][0] }}</a></td>
						{% else %}
							<td> {{ context.system_details[key][0] }}</td>
						{% endif %}
					{% elif loop.index0 == 4 %}
					<td> <a href="{{ context.system_details[key][0] }}" target="_blank">NAS Link</a>  </td>
					{% else %}
					<td> <a href="{{ context.system_details[key][0] }}" target="_blank">Jenkins Link</a>  </td>
					{% endif %}
				{% endfor %}
			</tr>
		</table>
	</div>

	<div class='inline-block-child'>
		<h2 style="text-align: center; font-weight: bold;">
			Results
		</h2>

		<table id="resultsTable">

			<thead>
				<tr>
					{% for column in context.results %}
						<th>{{ column }}</th>
					{% endfor %}
				</tr>
			</thead>
			<tbody>
				{% for row in range(context.results| no_of_rows ) %}
					{% set i = loop.index0 %}
					<tr class="table-row">
						{% for key in context.results %}
							<td> {{ context.results[key][i] }}</td>
						{% endfor %}
					</tr>
				{% endfor %}
			</tbody>
		</table>
	</div>
	
{% endblock %}